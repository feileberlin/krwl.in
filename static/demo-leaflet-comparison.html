<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet.js Marker Conventions Comparison</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        h1 {
            margin-bottom: 2rem;
            color: #4CAF50;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        .section {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 1.5rem;
        }
        .section h2 {
            color: #4CAF50;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        .map-demo {
            height: 400px;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        .code {
            background: #1a1a1a;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        pre {
            margin: 0;
            color: #a9b7c6;
        }
        .keyword { color: #cc7832; }
        .string { color: #6a8759; }
        .comment { color: #808080; }
        .function { color: #ffc66d; }
        
        .benefits {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        .benefits h2 {
            color: #4CAF50;
            margin-bottom: 1rem;
        }
        .benefits ul {
            list-style-position: inside;
            line-height: 1.8;
        }
        .benefits li {
            margin-bottom: 0.5rem;
        }
        .icon {
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Leaflet.js Marker Conventions - Before & After Comparison</h1>
        
        <div class="comparison">
            <!-- Custom Approach (Current) -->
            <div class="section">
                <h2>‚ùå Current: Custom HTML/CSS divIcon Approach</h2>
                <div id="map1" class="map-demo"></div>
                <div class="code">
                    <pre><code><span class="comment">// Custom divIcon with HTML/CSS</span>
<span class="keyword">const</span> marker = L.<span class="function">marker</span>([lat, lon], {
    icon: L.<span class="function">divIcon</span>({
        className: <span class="string">'event-marker'</span>,
        html: <span class="string">`
            &lt;div class="event-marker-container"&gt;
                &lt;div class="event-marker-preview"&gt;
                    ${previewTime}
                &lt;/div&gt;
                &lt;div class="event-marker-dot"&gt;&lt;/div&gt;
            &lt;/div&gt;
        `</span>
    })
}).<span class="function">addTo</span>(map);

<span class="comment">// Requires extensive custom CSS</span>
<span class="comment">// Not standard Leaflet</span></code></pre>
                </div>
            </div>
            
            <!-- Pure Leaflet Approach (Recommended) -->
            <div class="section">
                <h2>‚úÖ Recommended: Pure Leaflet.js Conventions</h2>
                <div id="map2" class="map-demo"></div>
                <div class="code">
                    <pre><code><span class="comment">// Standard Leaflet marker</span>
<span class="keyword">const</span> marker = L.<span class="function">marker</span>([lat, lon])
    .<span class="function">addTo</span>(map);

<span class="comment">// Rich popup with all info</span>
marker.<span class="function">bindPopup</span>(popupContent, {
    maxWidth: 300,
    minWidth: 200
});

<span class="comment">// Optional: Tooltip for preview</span>
marker.<span class="function">bindTooltip</span>(previewTime, {
    permanent: <span class="keyword">true</span>,
    direction: <span class="string">'top'</span>,
    offset: [0, -10]
});</code></pre>
                </div>
            </div>
        </div>
        
        <div class="benefits">
            <h2>Benefits of Using Pure Leaflet.js Conventions:</h2>
            <ul>
                <li><span class="icon">‚úì</span> <strong>Standard approach:</strong> Uses Leaflet's built-in marker, popup, and tooltip APIs</li>
                <li><span class="icon">‚úì</span> <strong>Better performance:</strong> Default markers are optimized by Leaflet</li>
                <li><span class="icon">‚úì</span> <strong>Less CSS needed:</strong> Minimal custom styles, uses Leaflet's default styling</li>
                <li><span class="icon">‚úì</span> <strong>Mobile-friendly:</strong> Leaflet handles touch events and responsiveness</li>
                <li><span class="icon">‚úì</span> <strong>Tooltips for preview:</strong> Use <code>bindTooltip()</code> with <code>permanent: true</code> to show time above marker</li>
                <li><span class="icon">‚úì</span> <strong>Rich popups:</strong> Use <code>bindPopup()</code> for detailed event information</li>
                <li><span class="icon">‚úì</span> <strong>Clustering support:</strong> Easy to add MarkerCluster plugin if needed</li>
                <li><span class="icon">‚úì</span> <strong>Maintainable:</strong> Following Leaflet conventions makes code easier to understand</li>
            </ul>
        </div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize maps
        const map1 = L.map('map1').setView([52.52, 13.405], 13);
        const map2 = L.map('map2').setView([52.52, 13.405], 13);
        
        // Add tiles to both maps
        [map1, map2].forEach(map => {
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                maxZoom: 19
            }).addTo(map);
        });
        
        // Sample event data
        const events = [
            {
                title: "Open Mic Night",
                location: { name: "Galeriehaus", lat: 52.52, lon: 13.40 },
                start_time: "2025-12-08T19:00:00",
                description: "Monthly open mic night featuring local musicians and performers.",
                distance: 0.8
            },
            {
                title: "Community Garden",
                location: { name: "Theresienstein Park", lat: 52.525, lon: 13.41 },
                start_time: "2025-12-08T18:00:00",
                description: "Join us for our weekly community garden meetup.",
                distance: 1.2
            },
            {
                title: "Farmers Market",
                location: { name: "Ludwigstra√üe", lat: 52.518, lon: 13.395 },
                start_time: "2025-12-09T05:30:00",
                description: "Fresh local produce and handcrafted items.",
                distance: 0.5
            }
        ];
        
        // Helper function to format time
        function formatTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
        
        // Map 1: Custom divIcon approach (current)
        events.forEach(event => {
            const previewTime = formatTime(event.start_time);
            
            const marker = L.marker([event.location.lat, event.location.lon], {
                icon: L.divIcon({
                    className: 'event-marker',
                    html: `
                        <div style="display: flex; flex-direction: column; align-items: center;">
                            <div style="background: rgba(76, 175, 80, 0.95); color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; white-space: nowrap; margin-bottom: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3);">
                                ${previewTime}
                            </div>
                            <div style="background: #4CAF50; border: 3px solid white; border-radius: 50%; width: 20px; height: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.4);"></div>
                        </div>
                    `
                })
            }).addTo(map1);
            
            const popupContent = `
                <div style="padding: 0.5rem;">
                    <h3 style="color: #4CAF50; margin: 0 0 0.5rem 0;">${event.title}</h3>
                    <p style="margin: 0.25rem 0;"><strong>üìç</strong> ${event.location.name}</p>
                    <p style="margin: 0.25rem 0;"><strong>üïê</strong> ${new Date(event.start_time).toLocaleString()}</p>
                    <p style="margin: 0.25rem 0;"><strong>üìè</strong> ${event.distance.toFixed(1)} km away</p>
                    <p style="margin: 0.5rem 0; color: #ccc; font-size: 0.9rem;">${event.description}</p>
                </div>
            `;
            
            marker.bindPopup(popupContent);
        });
        
        // Map 2: Pure Leaflet approach (recommended)
        events.forEach(event => {
            const previewTime = formatTime(event.start_time);
            
            // Standard Leaflet marker
            const marker = L.marker([event.location.lat, event.location.lon])
                .addTo(map2);
            
            // Permanent tooltip for time preview (Leaflet convention)
            marker.bindTooltip(previewTime, {
                permanent: true,
                direction: 'top',
                offset: [0, -10],
                className: 'time-preview-tooltip'
            });
            
            // Rich popup with event details
            const popupContent = `
                <div style="padding: 0.5rem;">
                    <h3 style="color: #4CAF50; margin: 0 0 0.5rem 0;">${event.title}</h3>
                    <p style="margin: 0.25rem 0;"><strong>üìç</strong> ${event.location.name}</p>
                    <p style="margin: 0.25rem 0;"><strong>üïê</strong> ${new Date(event.start_time).toLocaleString()}</p>
                    <p style="margin: 0.25rem 0;"><strong>üìè</strong> ${event.distance.toFixed(1)} km away</p>
                    <p style="margin: 0.5rem 0; color: #333; font-size: 0.9rem;">${event.description}</p>
                </div>
            `;
            
            marker.bindPopup(popupContent, {
                maxWidth: 300,
                minWidth: 200
            });
        });
    </script>
</body>
</html>
