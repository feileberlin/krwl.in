# JSON Data Directory

JSON data files for the KRWL> application.

## Structure

```
json/
├── manifest.json           # PWA manifest
├── events.json             # Published events
├── pending_events.json     # Events awaiting review
├── rejected_events.json    # Rejected events log
├── archived_events.json    # Archived past events
├── events.demo.json        # Demo events for development
├── i18n/                   # Translation files
│   ├── content.json        # English translations
│   └── content.de.json     # German translations
├── events/                 # Event data backups
│   └── old/               # Historical event backups
└── templates/              # JSON templates
```

## Main Data Files

### events.json
Published events displayed on the map. Updated by:
- Event scraping: `python3 src/event_manager.py scrape`
- Manual publishing: `python3 src/event_manager.py publish <id>`
- Bulk operations: `python3 src/event_manager.py bulk-publish "pending_*"`

### pending_events.json
Events awaiting editorial review. Scraped events go here first.

### events.demo.json
Demo events with dynamic timestamps for development/testing.
- Generated by: `python3 src/tools/generate_demo_events.py`
- Used when `config.json` has `data.source = "both"` or `"demo"`

### manifest.json
PWA (Progressive Web App) manifest file:
- App name, description, icons
- Display mode, theme color
- Installability metadata

## Translation Files (i18n/)

### content.json (English)
English translations for UI text.

### content.de.json (German)
German translations for UI text.

**Adding Translations:**
1. Add key to both files
2. Use in code: `i18n.t('key.path')`
3. Test: `python3 tests/test_translations.py`

## Event Data Backups (events/)

Events are automatically backed up when published:
- Location: `events/old/`
- Format: Timestamped JSON files
- Purpose: Audit trail and recovery

## Usage

Data files are loaded by:
- **Frontend**: `assets/js/app.js` loads events and translations
- **Backend**: `src/modules/editor.py`, `src/modules/scraper.py`

## Related

- **Event Schema**: [../../tests/test_event_schema.py](../../tests/test_event_schema.py)
- **Editor Module**: [../../src/modules/editor.py](../../src/modules/editor.py)
- **i18n Module**: [../js/i18n.js](../js/i18n.js)
